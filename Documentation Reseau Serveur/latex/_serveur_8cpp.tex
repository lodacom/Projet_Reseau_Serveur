\hypertarget{_serveur_8cpp}{\section{\-Serveur.\-cpp \-File \-Reference}
\label{_serveur_8cpp}\index{\-Serveur.\-cpp@{\-Serveur.\-cpp}}
}


\-Programme permettant de lancer le serveur.  


{\ttfamily \#include \char`\"{}sock.\-h\char`\"{}}\*
{\ttfamily \#include \char`\"{}sockdist.\-h\char`\"{}}\*
{\ttfamily \#include \char`\"{}sauvegarde.\-c\char`\"{}}\*
{\ttfamily \#include \char`\"{}sauvegarde.\-h\char`\"{}}\*
{\ttfamily \#include $<$vector$>$}\*
{\ttfamily \#include $<$string$>$}\*
{\ttfamily \#include $<$errno.\-h$>$}\*
{\ttfamily \#include $<$string.\-h$>$}\*
{\ttfamily \#include $<$unistd.\-h$>$}\*
{\ttfamily \#include $<$pthread.\-h$>$}\*
\subsection*{\-Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structthread__data}{thread\-\_\-data}
\end{DoxyCompactItemize}
\subsection*{\-Defines}
\begin{DoxyCompactItemize}
\item 
\hypertarget{_serveur_8cpp_a9d79a76d219761f42fec0618866a452f}{\#define {\bfseries \-L\-I\-S\-T\-E\-\_\-\-E\-T\-A\-B\-L\-I\-T\-\_\-\-C\-O\-N\-T\-R\-O\-L\-E\-U\-R}~\char`\"{}liste\-\_\-etablit\-\_\-controleur\char`\"{}}\label{_serveur_8cpp_a9d79a76d219761f42fec0618866a452f}

\item 
\hypertarget{_serveur_8cpp_a6e92df2ee6fc57923e510c685b835e6b}{\#define {\bfseries \-L\-I\-S\-T\-E\-\_\-\-R\-A\-P\-P\-O\-R\-T\-\_\-\-F\-A\-I\-T}~\char`\"{}liste\-\_\-rapport\-\_\-fait\char`\"{}}\label{_serveur_8cpp_a6e92df2ee6fc57923e510c685b835e6b}

\item 
\hypertarget{_serveur_8cpp_a16b4ff15e73a47021989805b10d68a92}{\#define {\bfseries \-L\-I\-S\-T\-E\-\_\-\-R\-A\-P\-P\-O\-R\-T\-\_\-\-E\-N\-C\-O\-U\-R\-S}~\char`\"{}liste\-\_\-rapport\-\_\-encours\char`\"{}}\label{_serveur_8cpp_a16b4ff15e73a47021989805b10d68a92}

\end{DoxyCompactItemize}
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{_serveur_8cpp_a7272059ce8f76bb7435c851be799d681}{void \hyperlink{_serveur_8cpp_a7272059ce8f76bb7435c851be799d681}{\-Serveur} ()}\label{_serveur_8cpp_a7272059ce8f76bb7435c851be799d681}

\begin{DoxyCompactList}\small\item\em \-Fonction permettant d'initialisé le serveur. \end{DoxyCompactList}\item 
void \hyperlink{_serveur_8cpp_a4a6dd361c1a671e4a3036eb760698447}{\-Transfert\-Rapport} (int desc, string pseudo)
\begin{DoxyCompactList}\small\item\em \-Permet d'envoyer le rapport à l'employé qui a fini son rapport mais également au controleur qui a fait une demande. \end{DoxyCompactList}\item 
vector$<$ string $>$ \hyperlink{_serveur_8cpp_a98dec3bea161d4251bc192bdc8e6c46a}{\-Lecture\-Dans\-Liste\-Fait} ()
\begin{DoxyCompactList}\small\item\em \-On veut récupérer tous les employés qui ont fini leur rapport. \end{DoxyCompactList}\item 
int \hyperlink{_serveur_8cpp_a7d804b7b891b8f9a05d363fe4344896d}{\-Cherche\-Dans\-Liste\-En\-Cours} (string p\-\_\-pseudo)
\begin{DoxyCompactList}\small\item\em \-Cherche dans le fichier des rapports en cours s'il y a p\-\_\-pseudo. \end{DoxyCompactList}\item 
int \hyperlink{_serveur_8cpp_acf841da7f5daeda48d7d86e1b45a6e7f}{\-Cherche\-Dans\-Liste\-Etablit\-Controleur} (string p\-\_\-pseudo)
\begin{DoxyCompactList}\small\item\em \-Cherche dans le fichier établi par le controleur s'il y a p\-\_\-pseudo. \end{DoxyCompactList}\item 
int \hyperlink{_serveur_8cpp_a30f40f7283df807b6853631dc165ad5c}{\-Cherche\-Dans\-Liste\-Fait} (string p\-\_\-pseudo)
\begin{DoxyCompactList}\small\item\em \-Cherche dans le fichier des rapports qui ont été fait s'il y a p\-\_\-pseudo. \end{DoxyCompactList}\item 
bool \hyperlink{_serveur_8cpp_a0ec4900c2c94807292234dd32c9ee0a8}{\-Est\-Dans\-Liste\-Etablit\-Controleur} (string p\-\_\-pseudo)
\begin{DoxyCompactList}\small\item\em \-Cherche dans le fichier établit par le contrôleur s'il y a p\-\_\-pseudo. \end{DoxyCompactList}\item 
\hypertarget{_serveur_8cpp_a0ca8d3a24f23f3d4a45aec58b805003b}{string {\bfseries \-Analyse} (string p\-\_\-message, int desc)}\label{_serveur_8cpp_a0ca8d3a24f23f3d4a45aec58b805003b}

\item 
\hypertarget{_serveur_8cpp_ae1aba2acfffb493087ab6940449f28aa}{string {\bfseries \-Lancement\-Serveur} (string p\-\_\-message, int desc)}\label{_serveur_8cpp_ae1aba2acfffb493087ab6940449f28aa}

\item 
void $\ast$ \hyperlink{_serveur_8cpp_a9b762f9d7c83150c1c690a8a5fa604f3}{\-Run\-Serveur} (void $\ast$p)
\begin{DoxyCompactList}\small\item\em \-Permet de gérer plusieurs employés en même temps grâce aux threads. \end{DoxyCompactList}\item 
\hypertarget{_serveur_8cpp_aa49f98875197a7ffc64375923bfe3943}{void \hyperlink{_serveur_8cpp_aa49f98875197a7ffc64375923bfe3943}{\-Accueil\-Employe} ()}\label{_serveur_8cpp_aa49f98875197a7ffc64375923bfe3943}

\begin{DoxyCompactList}\small\item\em \-Permet d'accueillir les employés en les acceptant à travers notre socket local. \end{DoxyCompactList}\item 
int \hyperlink{_serveur_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main} (int argc, char $\ast$$\ast$argv)
\begin{DoxyCompactList}\small\item\em \-Point d'entré du programme et qui permet de le lancer. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{_serveur_8cpp_aa94479d03b3fee7c767be09c49e369e8}{int {\bfseries dest\-Local}}\label{_serveur_8cpp_aa94479d03b3fee7c767be09c49e369e8}

\item 
\hypertarget{_serveur_8cpp_abb2b6f5250c23bf02b16ff10c0c5fc4e}{bool {\bfseries controleur\-\_\-present} = false}\label{_serveur_8cpp_abb2b6f5250c23bf02b16ff10c0c5fc4e}

\item 
\hypertarget{_serveur_8cpp_ab7f63b9b9120361bb3a4b757ef5a325f}{int {\bfseries nombre\-\_\-client} = 0}\label{_serveur_8cpp_ab7f63b9b9120361bb3a4b757ef5a325f}

\item 
\hypertarget{_serveur_8cpp_ad65dd953df0f1cbdb6cbef3315e9828c}{sockaddr\-\_\-in $\ast$ {\bfseries adresse\-Exp}}\label{_serveur_8cpp_ad65dd953df0f1cbdb6cbef3315e9828c}

\item 
\hypertarget{_serveur_8cpp_aa38712007f1072b88bcb85086db02cec}{socklen\-\_\-t {\bfseries taille}}\label{_serveur_8cpp_aa38712007f1072b88bcb85086db02cec}

\item 
\hypertarget{_serveur_8cpp_af9dd1e168a677b76ee41b85bca44530d}{char {\bfseries envoi} \mbox{[}100\mbox{]}}\label{_serveur_8cpp_af9dd1e168a677b76ee41b85bca44530d}

\item 
\hypertarget{_serveur_8cpp_a65fd8dcfa67db7b8203084314c46d53f}{char {\bfseries recu} \mbox{[}100\mbox{]}}\label{_serveur_8cpp_a65fd8dcfa67db7b8203084314c46d53f}

\item 
\hypertarget{_serveur_8cpp_a42c2e44bfed1efe2838a0edd6e57f4c0}{\-F\-I\-L\-E $\ast$ {\bfseries liste\-\_\-etablit\-\_\-controleur\-\_\-fichier}}\label{_serveur_8cpp_a42c2e44bfed1efe2838a0edd6e57f4c0}

\item 
\hypertarget{_serveur_8cpp_ad5c6ea9102127d65c411405074cd66eb}{pthread\-\_\-mutex\-\_\-t {\bfseries verrou\-\_\-acces\-\_\-liste\-\_\-encours} = \-P\-T\-H\-R\-E\-A\-D\-\_\-\-M\-U\-T\-E\-X\-\_\-\-I\-N\-I\-T\-I\-A\-L\-I\-Z\-E\-R}\label{_serveur_8cpp_ad5c6ea9102127d65c411405074cd66eb}

\item 
\hypertarget{_serveur_8cpp_af5e6e605df2f08eea27e1c28e591f8f9}{pthread\-\_\-mutex\-\_\-t {\bfseries verrou\-\_\-acces\-\_\-liste\-\_\-fait} = \-P\-T\-H\-R\-E\-A\-D\-\_\-\-M\-U\-T\-E\-X\-\_\-\-I\-N\-I\-T\-I\-A\-L\-I\-Z\-E\-R}\label{_serveur_8cpp_af5e6e605df2f08eea27e1c28e591f8f9}

\item 
\hypertarget{_serveur_8cpp_ac8e874d266e3fd4235fd94a11980692f}{struct \hyperlink{structthread__data}{thread\-\_\-data} {\bfseries thread}}\label{_serveur_8cpp_ac8e874d266e3fd4235fd94a11980692f}

\item 
\hypertarget{_serveur_8cpp_ada7e6c9944c431477bcf47f2e2ef27f4}{vector$<$ \hyperlink{structthread__data}{thread\-\_\-data} $>$ {\bfseries liste\-\_\-thread}}\label{_serveur_8cpp_ada7e6c9944c431477bcf47f2e2ef27f4}

\end{DoxyCompactItemize}


\subsection{\-Detailed \-Description}
\-Programme permettant de lancer le serveur. \begin{DoxyAuthor}{\-Authors}
\-Duplouy \-Olivier, \-Burc \-Pierre 
\end{DoxyAuthor}
\begin{DoxyVersion}{\-Version}
1.\-0 
\end{DoxyVersion}
\begin{DoxyDate}{\-Date}
20 décembre 2012
\end{DoxyDate}
\-Enregistrement de rapports d'activité dans une entreprise 

\subsection{\-Function \-Documentation}
\hypertarget{_serveur_8cpp_a7d804b7b891b8f9a05d363fe4344896d}{\index{\-Serveur.\-cpp@{\-Serveur.\-cpp}!\-Cherche\-Dans\-Liste\-En\-Cours@{\-Cherche\-Dans\-Liste\-En\-Cours}}
\index{\-Cherche\-Dans\-Liste\-En\-Cours@{\-Cherche\-Dans\-Liste\-En\-Cours}!Serveur.cpp@{\-Serveur.\-cpp}}
\subsubsection[{\-Cherche\-Dans\-Liste\-En\-Cours}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf \-Cherche\-Dans\-Liste\-En\-Cours} (
\begin{DoxyParamCaption}
\item[{string}]{p\-\_\-pseudo}
\end{DoxyParamCaption}
)}}\label{_serveur_8cpp_a7d804b7b891b8f9a05d363fe4344896d}


\-Cherche dans le fichier des rapports en cours s'il y a p\-\_\-pseudo. 


\begin{DoxyParams}{\-Parameters}
{\em string} & p\-\_\-pseudo \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
0 quand on l'a trouvé -\/1 sinon 
\end{DoxyReturn}
\hypertarget{_serveur_8cpp_acf841da7f5daeda48d7d86e1b45a6e7f}{\index{\-Serveur.\-cpp@{\-Serveur.\-cpp}!\-Cherche\-Dans\-Liste\-Etablit\-Controleur@{\-Cherche\-Dans\-Liste\-Etablit\-Controleur}}
\index{\-Cherche\-Dans\-Liste\-Etablit\-Controleur@{\-Cherche\-Dans\-Liste\-Etablit\-Controleur}!Serveur.cpp@{\-Serveur.\-cpp}}
\subsubsection[{\-Cherche\-Dans\-Liste\-Etablit\-Controleur}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf \-Cherche\-Dans\-Liste\-Etablit\-Controleur} (
\begin{DoxyParamCaption}
\item[{string}]{p\-\_\-pseudo}
\end{DoxyParamCaption}
)}}\label{_serveur_8cpp_acf841da7f5daeda48d7d86e1b45a6e7f}


\-Cherche dans le fichier établi par le controleur s'il y a p\-\_\-pseudo. 


\begin{DoxyParams}{\-Parameters}
{\em string} & p\-\_\-pseudo \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
0 quand on l'a trouvé -\/1 sinon 
\end{DoxyReturn}
\hypertarget{_serveur_8cpp_a30f40f7283df807b6853631dc165ad5c}{\index{\-Serveur.\-cpp@{\-Serveur.\-cpp}!\-Cherche\-Dans\-Liste\-Fait@{\-Cherche\-Dans\-Liste\-Fait}}
\index{\-Cherche\-Dans\-Liste\-Fait@{\-Cherche\-Dans\-Liste\-Fait}!Serveur.cpp@{\-Serveur.\-cpp}}
\subsubsection[{\-Cherche\-Dans\-Liste\-Fait}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf \-Cherche\-Dans\-Liste\-Fait} (
\begin{DoxyParamCaption}
\item[{string}]{p\-\_\-pseudo}
\end{DoxyParamCaption}
)}}\label{_serveur_8cpp_a30f40f7283df807b6853631dc165ad5c}


\-Cherche dans le fichier des rapports qui ont été fait s'il y a p\-\_\-pseudo. 


\begin{DoxyParams}{\-Parameters}
{\em string} & p\-\_\-pseudo \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
0 quand on l'a trouvé -\/1 sinon 
\end{DoxyReturn}
\hypertarget{_serveur_8cpp_a0ec4900c2c94807292234dd32c9ee0a8}{\index{\-Serveur.\-cpp@{\-Serveur.\-cpp}!\-Est\-Dans\-Liste\-Etablit\-Controleur@{\-Est\-Dans\-Liste\-Etablit\-Controleur}}
\index{\-Est\-Dans\-Liste\-Etablit\-Controleur@{\-Est\-Dans\-Liste\-Etablit\-Controleur}!Serveur.cpp@{\-Serveur.\-cpp}}
\subsubsection[{\-Est\-Dans\-Liste\-Etablit\-Controleur}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf \-Est\-Dans\-Liste\-Etablit\-Controleur} (
\begin{DoxyParamCaption}
\item[{string}]{p\-\_\-pseudo}
\end{DoxyParamCaption}
)}}\label{_serveur_8cpp_a0ec4900c2c94807292234dd32c9ee0a8}


\-Cherche dans le fichier établit par le contrôleur s'il y a p\-\_\-pseudo. 


\begin{DoxyParams}{\-Parameters}
{\em string} & p\-\_\-pseudo \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
vrai si p\-\_\-pseudo est présent dans le fichier établit par le controleur 
\end{DoxyReturn}
\hypertarget{_serveur_8cpp_a98dec3bea161d4251bc192bdc8e6c46a}{\index{\-Serveur.\-cpp@{\-Serveur.\-cpp}!\-Lecture\-Dans\-Liste\-Fait@{\-Lecture\-Dans\-Liste\-Fait}}
\index{\-Lecture\-Dans\-Liste\-Fait@{\-Lecture\-Dans\-Liste\-Fait}!Serveur.cpp@{\-Serveur.\-cpp}}
\subsubsection[{\-Lecture\-Dans\-Liste\-Fait}]{\setlength{\rightskip}{0pt plus 5cm}vector$<$ string $>$ {\bf \-Lecture\-Dans\-Liste\-Fait} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{_serveur_8cpp_a98dec3bea161d4251bc192bdc8e6c46a}


\-On veut récupérer tous les employés qui ont fini leur rapport. 

\begin{DoxyReturn}{\-Returns}
renvoi la liste de tous les employés ayant fini leur rapport 
\end{DoxyReturn}
\hypertarget{_serveur_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{\index{\-Serveur.\-cpp@{\-Serveur.\-cpp}!main@{main}}
\index{main@{main}!Serveur.cpp@{\-Serveur.\-cpp}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf main} (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$$\ast$}]{argv}
\end{DoxyParamCaption}
)}}\label{_serveur_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}


\-Point d'entré du programme et qui permet de le lancer. 


\begin{DoxyParams}{\-Parameters}
{\em int} & argc, char$\ast$$\ast$ argv \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
0 si ça s'est bien passé 
\end{DoxyReturn}
\hypertarget{_serveur_8cpp_a9b762f9d7c83150c1c690a8a5fa604f3}{\index{\-Serveur.\-cpp@{\-Serveur.\-cpp}!\-Run\-Serveur@{\-Run\-Serveur}}
\index{\-Run\-Serveur@{\-Run\-Serveur}!Serveur.cpp@{\-Serveur.\-cpp}}
\subsubsection[{\-Run\-Serveur}]{\setlength{\rightskip}{0pt plus 5cm}void $\ast$ {\bf \-Run\-Serveur} (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{p}
\end{DoxyParamCaption}
)}}\label{_serveur_8cpp_a9b762f9d7c83150c1c690a8a5fa604f3}


\-Permet de gérer plusieurs employés en même temps grâce aux threads. 


\begin{DoxyParams}{\-Parameters}
{\em void$\ast$} & p \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
si ça s'est bien passé ou non 
\end{DoxyReturn}
\hypertarget{_serveur_8cpp_a4a6dd361c1a671e4a3036eb760698447}{\index{\-Serveur.\-cpp@{\-Serveur.\-cpp}!\-Transfert\-Rapport@{\-Transfert\-Rapport}}
\index{\-Transfert\-Rapport@{\-Transfert\-Rapport}!Serveur.cpp@{\-Serveur.\-cpp}}
\subsubsection[{\-Transfert\-Rapport}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Transfert\-Rapport} (
\begin{DoxyParamCaption}
\item[{int}]{desc, }
\item[{string}]{pseudo}
\end{DoxyParamCaption}
)}}\label{_serveur_8cpp_a4a6dd361c1a671e4a3036eb760698447}


\-Permet d'envoyer le rapport à l'employé qui a fini son rapport mais également au controleur qui a fait une demande. 


\begin{DoxyParams}{\-Parameters}
{\em int} & desc,string pseudo \\
\hline
\end{DoxyParams}
